<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    #messages { border: 1px solid #ccc; height: 200px; overflow-y: scroll; padding: 10px; }
    #map { width: 100%; height: 300px; margin-top: 20px; }
    #event { margin-top: 20px; padding: 10px; border: 1px solid #aaa; }
    button { margin: 5px; }
  </style>
</head>
<body>
  <h1>ğŸ“± Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</h1>
  <div id="messages"></div>
  <input id="m" autocomplete="off" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." />
  <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>

  <h2>ğŸ“ Ù…ÙˆÙ‚Ø¹ÙŠ Ø¹Ù„Ù‰ Ø®Ø±Ø§Ø¦Ø· Google</h2>
  <div id="map"></div>

  <h2>ğŸ“¢ Ø­Ø¯Ø« Ø¹Ø§Ø¦Ù„ÙŠ</h2>
  <div id="event">
    <p>ğŸ“… Ø§Ø¬ØªÙ…Ø§Ø¹ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø© Ø§Ù„Ø³Ø§Ø¹Ø© 6 Ù…Ø³Ø§Ø¡Ù‹</p>
    <button onclick="attend(true)">Ø³Ø£Ø­Ø¶Ø± âœ…</button>
    <button onclick="attend(false)">Ù„Ù† Ø£Ø­Ø¶Ø± âŒ</button>
    <p id="status"></p>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    // Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
    socket.on('chat message', function(msg){
      const messages = document.getElementById('messages');
      const item = document.createElement('div');
      item.textContent = msg;
      messages.appendChild(item);
      messages.scrollTop = messages.scrollHeight;
    });

    function sendMessage() {
      const input = document.getElementById('m');
      if(input.value.trim() !== ""){
        socket.emit('chat message', input.value);
        input.value = '';
      }
    }

    // Ø®Ø±Ø§Ø¦Ø· Google
    function initMap() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;
          const map = new google.maps.Map(document.getElementById('map'), {
            zoom: 15,
            center: {lat, lng}
          });
          new google.maps.Marker({position: {lat, lng}, map: map});
        });
      }
    }

    // Ø­Ø¶ÙˆØ± Ø§Ù„Ø­Ø¯Ø«
    function attend(choice) {
      const status = document.getElementById('status');
      if (choice) {
        status.textContent = "âœ… Ø£Ù†Øª Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¶ÙˆØ±. Ø³ÙŠØªÙ… ØªØªØ¨Ø¹ Ù…ÙˆÙ‚Ø¹Ùƒ ÙˆØ²Ù…Ù†Ùƒ.";
      } else {
        status.textContent = "âŒ Ù„Ù† ØªØ­Ø¶Ø± Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø«.";
      }
    }
  </script>
  <!-- Ø¶Ø¹ Ù…ÙØªØ§Ø­ Google Maps API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù…ÙƒØ§Ù† YOUR_API_KEY -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>
</body>
</html>